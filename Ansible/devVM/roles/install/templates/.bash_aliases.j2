# bash commands
  alias ..='cd ..'
  alias ...='cd ../..'
  alias ....='cd ../../..'
  alias c='clear'
  alias sau='sudo apt update; sudo apt list --upgradable'
  alias sai='sudo apt upgrade'
  alias rld='source ~/.bashrc; source ~/.bash_aliases; source ~/.profile'
  alias tsync='sudo hwclock -s'
  alias qpr='gh pr create -t "$(git log -1 --pretty=%B)" -b "New Update" -B main -H dev'

# terraform
  alias tfo='terraform output'
  alias tfp='terraform plan -out run.plan'
  alias tfpr='terraform plan'
  alias tfi='terraform init'
  alias tfiu='terraform init -upgrade'
  alias tfa='terraform  apply --auto-approve  run.plan'
  alias tfar='terraform apply --auto-approve'
  alias tfd='terraform destroy --auto-approve'
  alias tfv='terraform validate'
  alias tff='terraform fmt'
  alias tfr='terraform refresh'
  alias tfs='terraform show'
  alias tver='clear; echo -e "Terraform version:"; terraform -v; echo "Local providers:"; echo -e "azurerm:"; tv; echo -e "aws:"; tv aws; echo -e "google:"; tv google; echo -e "others:"; tv "null|temp|rand|loc"'
  alias tfh='terraform -help'
  alias tfpr='terraform providers'
  alias tfg='terraform graph'
  alias tch='clear; echo -e "formatting..."; tff; echo -e "validating..."; tfv; echo -e "tflinting..."; tflint'
  alias tsl='terraform state list'
  alias tss='terraform state show'
  alias tft='terraform taint'

# function to get last 5 terraform providers
tv() {
  ls -1t ~/.terraform.d/plugin-cache/linux_amd64/ | grep -E "$1" | head -5
}

# packer
  alias pv='packer validate'
  alias pb='packer build'
  alias pver='packer -v'

# vault
  alias vt='vault'

# chef tools kitchen, foodcritic, cookstyle
  alias kc='kitchen create'
  alias kls='kitchen list'
  alias kd='kitchen destroy'
  alias kl='kitchen login'
  alias kv='kitchen verify'
  alias kt='kitchen test'
  alias kcv='kitchen converge'

  alias fc='foodcritic .'
  alias cs='cookstyle .'

# az cli for gitbash in windows. Not ideal, but most of the commands work.
# az() {
#          "az.cmd" "$@"
#  }
#  export -f az

# Azure
  alias agl='az group list -o table'
  alias arl='az resource list -o table -g '
  alias agd='az group delete -y -n '
  alias aal='az account list -o table'
  alias aall='az account list-locations -o table'
  alias acl='az cloud list -o table'
  alias avl='az vm list -o table'
  alias sdv='az vm start -g MZVdevVM -n MZVMainDev'
  alias spv='az vm start -g MZVWINDOWSVMS -n MZVMainWin11'
  alias adsl='az deployment sub list -o table'
  alias abd='az bicep decompile -f '

# Docker
  alias dcl='docker context list'
  alias dcls='docker container ls --all'
  alias dcr='docker container rm'
  alias di='docker images'
  alias dir='docker image rm'
  alias db='docker build'
  alias dr='docker run -it --rm'
  alias drm='docker run -it --rm --name personaldev --mount type=bind,source=/c/Repos,target=/Repos'
  alias drd='docker run -it --rm --name personaldev --mount type=bind,source=/c/Repos/Spark2021,target=/Repos'
  #Purging All Unused or Dangling Images, Containers, Volumes, and Networks. Be careful when to use it.
  alias dsp='docker system prune -a'
  alias dver='docker -v; docker version'
  alias dinf='docker info'

# kubernetes
  alias k='kubectl'

# Personal
  alias gorepos='cd ~/Repos/'
  alias sa='cat ~/.bash_aliases'
  alias ea='vi ~/.bash_aliases'
  alias myip='dig +short myip.opendns.com @resolver1.opendns.com'
  alias myip2='wget http://ipecho.net/plain -O - -q ; echo'
  
# Ansible
  alias aps='ansible-playbook --syntax-check'
  alias ap='ansible-playbook'
  alias aver='ansible --version'

# DataBricks
  alias dbpl='cat ~/.databrickscfg'
  alias dbwls='databricks workspace ls'
  alias dbwlsu='databricks workspace ls /Users'
  alias dblls='databricks libraries -l'
  alias dbcl='databricks clusters list'
  alias dbcc='databricks clusters create --json-file'
  alias dbcg='databricks clusters get --cluster-id'
  alias dbcd='databricks clusters delete --cluster-id'
  alias dbcs='databricks clusters start --cluster-id'
  alias dbcr='databricks clusters restart --cluster-id'
  alias dbcpd='databricks clusters permanent-delete --cluster-id'
  alias dbver='databricks -v'

# tmux
  alias tls='tmux ls'
  alias tn='tmux new -s'
  alias ta='tmux a -t'
  alias tk='tmux kill-ses -t'

# GitHub CLI
  alias grc='gh repo create '

# All Versions
  alias v='echo "***Terraform***"; tver; echo -e "\n***tflint***"; tflint -v; echo -e "\n***Packer***"; pver; echo -e "\n***Docker***"; dver; echo -e "\n***AZ CLI***"; az -v; echo -e "\n***Databricks CLI***"; dbver; echo -e "\n***Maven***"; mvn -version; echo -e "\n***Java***"; java -version; echo -e "\n***Python2***"; python --version; echo -e "\n***Python3***"; python3 --version; echo -e "\n***pip***"; pip --version; echo -e "\n***DotNet Core***"; dotnet --version; echo -e "\n***go***"; go version; echo -e "\n***Node npm and nvm***"; node -v; npm -v; nvm -v; echo -e "\n***Git***"; git --version; echo -e "\n***GitHub CLI***"; gh --version; echo -e "\n***Ansible***"; aver; echo -e "\n***Chef***"; chef -v; echo -e "\n***Kubectl***"; kubectl version; echo -e "\n***Helm***"; helm version; echo -e "\n"'

# Environment Variables v2. Personal script I have to switch between Azure environment. Migh open source it as well.

sc () {
#  echo "$1"
#  . setWSLCloud.sh -s Marcelo-"$1"
  . setWSLCloud.sh -s $1
}

gsl () {
  . setWSLCloud.sh -l
}

#  alias scg='. setWSLCloud.sh -s Marcelo-Gov'
#  alias scc='. setWSLCloud.sh -s Marcelo-Internal'
#  alias scm='. setWSLCloud.sh -s Marcelo-Personal'
#  alias sct='. setWSLCloud.sh -s Marcelo-Main'
#  alias sce='. setWSLCloud.sh -s Marcelo-'
  alias gcd='echo Environment: $DEV_ENVIRONMENT; echo ClientName:`az account show -s $ARM_SUBSCRIPTION_ID --query {user:user.name} -o tsv`; echo ClientID: $ARM_CLIENT_ID; echo TenantName: $ARM_TENANT_NAME; echo TenantID: $ARM_TENANT_ID; echo SubscriptionID: $ARM_SUBSCRIPTION_ID; echo Certificate: $ARM_CLIENT_CERTIFICATE_PATH; echo ClientPassword: $ARM_CLIENT_SECRET; echo TerraformToken: $TF_API_TOKEN'

# Update tools. Personal script I have to update Terraform, Terraform providers and Packer. 
# It also gives information about current installed versions and latest 'n' versions available.
  alias utv='. updateTools.sh -v'
  alias utl='. updateTools.sh -ls'
  alias uti='. updateTools.sh -i'

# Bicep
RED='\033[0;31m'
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[0;33m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

## Subscription level
bsv () {
  clear
  echo -e "${GREEN}Starting Deployment ${YELLOW}$1 ${GREEN}using Subscription:${CYAN} $DEV_ENVIRONMENT ${NC}"
  echo -e "${BLUE}### Validating ### ${NC}"
  az deployment sub validate -n $1 -l eastus2 -f deploy.bicep -p @parameters.json -o table
  echo
}
bsch () {
  bsv $1
  echo -e "${BLUE}### Planning ###${NC}"
  az deployment sub create -n $1 -l eastus2 -f deploy.bicep -p @parameters.json -w -r ResourceIdOnly
}

bschf () {
  bsv $1
  echo -e "${BLUE}### Planning ###${NC}"
  az deployment sub create -n $1 -l eastus2 -f deploy.bicep -p @parameters.json  -w
}

bsc () {
  clear
   echo -e "${GREEN}Starting Deployment ${YELLOW}$1 ${GREEN}using Subscription:${CYAN} $DEV_ENVIRONMENT ${NC}"
  echo -e "${BLUE}### Creating ### ${NC}"
  az deployment sub create -n $1 -l eastus2 -f deploy.bicep -p @parameters.json
  echo
  echo -e "${BLUE}### Outputs ###${NC}"
  bso $1
}

bso () {
  az deployment sub show -n $1 --query "properties.outputs" -o yaml
}

bsd () {
  echo -e "${GREEN}Cleanning Deployment: ${YELLOW}$1 ${GREEN}in Subscription:${CYAN} $DEV_ENVIRONMENT ${NC}"
  rgName=`az deployment sub show -n $1 --query "properties.outputs.rgName.value" -o tsv`
  echo -e "${GREEN}### Deleting Deployment: $1 ###${NC}"
  az deployment sub delete -n $1
  echo -e "${GREEN}### Deleting RG: $rgName ###${NC}"
  az group delete -n $rgName -y 
}

## RG level
bgv () {
  clear
  echo -e "${GREEN}Starting Deployment in RG ${YELLOW}$1 ${GREEN}using Subscription:${CYAN} $DEV_ENVIRONMENT ${NC}"
  echo -e "${BLUE}### Validating ### ${NC}"
  az deployment group validate -g $1 -n $1 -f deploy.bicep -p @parameters.json -o table
  echo
}

bgch () {
  bgv $1
  echo -e "${BLUE}### Planning ###${NC}"
  az deployment group create -g $1 -n $1 -f deploy.bicep -p @parameters.json -w -r ResourceIdOnly
}

bgchf () {
  bgv $1
  echo -e "${BLUE}### Planning ###${NC}"
  az deployment group create -g $1 -n $1 -f deploy.bicep -p @parameters.json  -w
}

bgc () {
  clear
  echo -e "${GREEN}Starting Deployment in RG ${YELLOW}$1 ${GREEN}using Subscription:${CYAN} $DEV_ENVIRONMENT ${NC}"
  echo -e "${BLUE}### Creating ### ${NC}"
  az deployment group create -g $1 -n $1 -f deploy.bicep -p @parameters.json --verbose
  echo
  echo -e "${BLUE}### Outputs ###${NC}"
  bgo $1
}

bgo () {
  az deployment group show -g $1 -n $1 --query "properties.outputs" -o yaml
}
